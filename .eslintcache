[{"/home/duchieu/Documents/itss_std_react_todo_k63_full/src/index.js":"1","/home/duchieu/Documents/itss_std_react_todo_k63_full/src/App.js":"2","/home/duchieu/Documents/itss_std_react_todo_k63_full/src/reportWebVitals.js":"3","/home/duchieu/Documents/itss_std_react_todo_k63_full/src/components/Todo.js":"4","/home/duchieu/Documents/itss_std_react_todo_k63_full/src/lib/firebase.js":"5","/home/duchieu/Documents/itss_std_react_todo_k63_full/src/components/Input.js":"6","/home/duchieu/Documents/itss_std_react_todo_k63_full/src/components/TodoItem.js":"7","/home/duchieu/Documents/itss_std_react_todo_k63_full/src/components/Filter.js":"8","/home/duchieu/Documents/itss_std_react_todo_k63_full/src/lib/util.js":"9","/home/duchieu/Documents/itss_std_react_todo_k63_full/src/components/Login.js":"10"},{"size":500,"mtime":1656423464126,"results":"11","hashOfConfig":"12"},{"size":870,"mtime":1656424021442,"results":"13","hashOfConfig":"12"},{"size":362,"mtime":1656423464126,"results":"14","hashOfConfig":"12"},{"size":8125,"mtime":1656424021442,"results":"15","hashOfConfig":"12"},{"size":1297,"mtime":1656424057054,"results":"16","hashOfConfig":"12"},{"size":573,"mtime":1656423464126,"results":"17","hashOfConfig":"12"},{"size":389,"mtime":1656423464126,"results":"18","hashOfConfig":"12"},{"size":666,"mtime":1656423464126,"results":"19","hashOfConfig":"12"},{"size":68,"mtime":1656423464126,"results":"20","hashOfConfig":"12"},{"size":1108,"mtime":1656424021442,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"19mlbn2",{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"28","messages":"29","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"30","usedDeprecatedRules":"31"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"38","messages":"39","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"31"},"/home/duchieu/Documents/itss_std_react_todo_k63_full/src/index.js",[],"/home/duchieu/Documents/itss_std_react_todo_k63_full/src/App.js",[],"/home/duchieu/Documents/itss_std_react_todo_k63_full/src/reportWebVitals.js",[],"/home/duchieu/Documents/itss_std_react_todo_k63_full/src/components/Todo.js",["44","45","46","47","48"],"import React, { useState, useEffect } from \"react\";\n\n/* コンポーネント */\nimport TodoItem from \"./TodoItem\";\nimport Input from \"./Input\";\nimport Filter from \"./Filter\";\nimport { auth, db, storage } from \"../lib/firebase.js\";\nimport { ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\nimport firebase from \"firebase/compat\";\n\n/* カスタムフック */\n// import useStorage from '../hooks/storage';\n\n/* ライブラリ */\n\nfunction Todo({ user, setUser }) {\n    // const [items, putItems, clearItems] = useStorage();\n\n    const [items, setItems] = useState([]);\n    const [filter, setFilter] = React.useState(\"ALL\");\n    const [isOpenModal, setIsOpenModal] = useState(false);\n    const [avt, setAvt] = useState(null);\n    useEffect(() => {\n        db.collection(\"users\").onSnapshot((snapshot) => {\n            snapshot.docs.map((doc) => {\n                if (doc.data().uid == user.uid) {\n                    if (doc.data().image) {\n                        setAvt(doc.data().image);\n                    }\n                }\n            });\n        });\n        const unsubscribe = db.collection(\"todos\").onSnapshot((snapshot) => {\n            const documents = snapshot.docs.map((doc) => ({\n                ...doc.data(),\n                key: doc.id,\n            }));\n\n            setItems(documents);\n        });\n\n        return unsubscribe;\n    }, []);\n\n    const handleLogout = () => {\n        setUser(null);\n        auth.signOut();\n    };\n    const displayItems = items.filter((item) => {\n        if (filter === \"ALL\") return true;\n        if (filter === \"TODO\") return !item.done;\n        if (filter === \"DONE\") return item.done;\n    });\n\n    const handleCheck = (checked) => {\n        const newItems = items.map((item) => {\n            if (item.key === checked.key) {\n                item.done = !item.done;\n            }\n            return item;\n        });\n        setItems(newItems);\n        newItems.forEach((item) => {\n            db.collection(\"todos\").doc(item.key).update(item);\n        });\n    };\n\n    const handleAdd = (text) => {\n        // putItems([...items, { key: getKey(), text, done: false }]);\n        db.collection(\"todos\").add({\n            text,\n            done: false,\n        });\n    };\n    const handleDelete = () => {\n        items.forEach((item) => {\n            const key = item.key;\n            db.collection(\"todos\").doc(key).delete();\n        });\n    };\n    const handleUpload = async (e) => {\n        const file = e.target.files[0];\n        console.log(file);\n        // const ref = firebase.storage().ref().child(`/images/${file.name}`);\n        // try {\n        //     await ref.put(file);\n        //     setAvt(await ref.getDownloadURL());\n        // } catch (err) {\n        //     console.log(err);\n        // }\n        const storageRef = ref(storage, `/files/${file.name}`);\n        const uploadTask = uploadBytesResumable(storageRef, file);\n        uploadTask.on(\n            \"state_changed\",\n            (snapshot) => {},\n            (err) => console.log(err),\n            () => {\n                // download url\n                getDownloadURL(uploadTask.snapshot.ref).then((url) => {\n                    console.log(url);\n                    setAvt(url);\n                    db.collection(\"users\").onSnapshot((snapshot) => {\n                        snapshot.docs.map((doc) => {\n                            if (doc.data().uid == user.uid) {\n                                db.collection(\"users\")\n                                    .doc(doc.id)\n                                    .update({\n                                        ...doc.data(),\n                                        image: url,\n                                    });\n                            }\n                        });\n                    });\n                });\n            }\n        );\n        setIsOpenModal(false);\n    };\n\n    const handleFilterChange = (value) => setFilter(value);\n\n    return (\n        <article class=\"panel is-danger\">\n            <div\n                style={{\n                    display: \"flex\",\n                    justifyContent: \"center\",\n                    alignItems: \"center\",\n                }}\n            >\n                {!avt ? (\n                    <button\n                        className=\"button is-primary is-inverted\"\n                        onClick={() => setIsOpenModal(true)}\n                    >\n                        <span className=\"icon\">\n                            <i className=\"fas fa-user\"></i>\n                        </span>\n                    </button>\n                ) : (\n                    <div\n                        style={{\n                            width: \"50px\",\n                            height: \"50px\",\n                            borderRadius: \"15px\",\n                        }}\n                    >\n                        <img src={avt}></img>\n                    </div>\n                )}\n                {isOpenModal && (\n                    <div className=\"modal is-active\">\n                        <div className=\"modal-background\"></div>\n                        <div className=\"modal-card\">\n                            <header className=\"modal-card-head\">\n                                <p className=\"modal-card-title\">Modal title</p>\n                                <button\n                                    aria-label=\"close\"\n                                    onClick={() => setIsOpenModal(false)}\n                                >\n                                    <span class=\"icon is-small\">\n                                        <i class=\"fas fa-times\"></i>\n                                    </span>\n                                </button>\n                            </header>\n                            <section className=\"modal-card-body\">\n                                <div className=\"file \">\n                                    <label className=\"file-label\">\n                                        <input\n                                            className=\"file-input\"\n                                            type=\"file\"\n                                            onChange={handleUpload}\n                                        />\n                                        <span className=\"file-cta\">\n                                            <span className=\"file-icon\">\n                                                <i className=\"fas fa-upload\"></i>\n                                            </span>\n                                            <span className=\"file-label\">\n                                                Choose a file…\n                                            </span>\n                                        </span>\n                                    </label>\n                                </div>\n                            </section>\n                        </div>\n                    </div>\n                )}\n                {user.displayName}\n                <button\n                    className=\"button is-primary is-inverted\"\n                    onClick={handleLogout}\n                >\n                    Logout\n                </button>\n            </div>\n            <div className=\"panel-heading\">\n                <span class=\"icon-text\">\n                    <span class=\"icon\">\n                        <i class=\"fas fa-calendar-check\"></i>\n                    </span>\n                    <span> ITSS Todoアプリ</span>\n                </span>\n            </div>\n            <Input onAdd={handleAdd} />\n            <Filter onChange={handleFilterChange} value={filter} />\n            {displayItems.map((item) => (\n                <TodoItem key={item.key} item={item} onCheck={handleCheck} />\n            ))}\n            <div className=\"panel-block\">{displayItems.length} items</div>\n            <div className=\"panel-block\">\n                <button\n                    className=\"button is-light is-fullwidth\"\n                    onClick={handleDelete}\n                >\n                    全てのToDoを削除\n                </button>\n            </div>\n        </article>\n    );\n}\nexport default Todo;\n",["49","50"],"/home/duchieu/Documents/itss_std_react_todo_k63_full/src/lib/firebase.js",[],"/home/duchieu/Documents/itss_std_react_todo_k63_full/src/components/Input.js",["51"],"/home/duchieu/Documents/itss_std_react_todo_k63_full/src/components/TodoItem.js",[],"/home/duchieu/Documents/itss_std_react_todo_k63_full/src/components/Filter.js",["52","53","54"],"/home/duchieu/Documents/itss_std_react_todo_k63_full/src/lib/util.js",[],"/home/duchieu/Documents/itss_std_react_todo_k63_full/src/components/Login.js",[],{"ruleId":"55","severity":1,"message":"56","line":8,"column":9,"nodeType":"57","messageId":"58","endLine":8,"endColumn":16},{"ruleId":"55","severity":1,"message":"59","line":8,"column":17,"nodeType":"57","messageId":"58","endLine":8,"endColumn":27},{"ruleId":"55","severity":1,"message":"60","line":8,"column":28,"nodeType":"57","messageId":"58","endLine":8,"endColumn":38},{"ruleId":"55","severity":1,"message":"61","line":9,"column":9,"nodeType":"57","messageId":"58","endLine":9,"endColumn":15},{"ruleId":"62","severity":1,"message":"63","line":33,"column":42,"nodeType":"64","messageId":"65","endLine":33,"endColumn":44},{"ruleId":"66","replacedBy":"67"},{"ruleId":"68","replacedBy":"69"},{"ruleId":"55","severity":1,"message":"70","line":1,"column":17,"nodeType":"57","messageId":"58","endLine":1,"endColumn":25},{"ruleId":"71","severity":1,"message":"72","line":10,"column":7,"nodeType":"73","endLine":14,"endColumn":8},{"ruleId":"71","severity":1,"message":"72","line":15,"column":7,"nodeType":"73","endLine":19,"endColumn":8},{"ruleId":"71","severity":1,"message":"72","line":20,"column":7,"nodeType":"73","endLine":24,"endColumn":8},"no-unused-vars","'getDocs' is defined but never used.","Identifier","unusedVar","'collection' is defined but never used.","'onSnapshot' is defined but never used.","'getKey' is defined but never used.","array-callback-return","Array.prototype.filter() expects a value to be returned at the end of arrow function.","ArrowFunctionExpression","expectedAtEnd","no-native-reassign",["74"],"no-negated-in-lhs",["75"],"'useState' is defined but never used.","jsx-a11y/anchor-is-valid","The href attribute requires a valid value to be accessible. Provide a valid, navigable address as the href value. If you cannot provide a valid href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement","no-global-assign","no-unsafe-negation"]